(()=>{const n=["facebook.com","www.facebook.com","instagram.com","www.instagram.com","reddit.com","www.reddit.com","tiktok.com","www.tiktok.com"],t=["youtube.com","www.youtube.com","twitter.com","www.twitter.com","x.com","www.x.com"];function o(){const n=window.location.hostname.toLowerCase(),t=window.location.pathname,o=window.location.search;return n.includes("youtube.com")?"/watch"===t&&o.includes("v="):!(!n.includes("twitter.com")&&!n.includes("x.com"))&&(t.includes("/status/")||t.includes("/tweet/"))}async function e(){try{console.log("Handling focus mode for:",window.location.href);const e=await window.chrome.storage.local.get(["focusMode","focusAreas"]),i=e.focusMode||!1,a=e.focusAreas||[];if(console.log("Focus mode:",i,"Focus areas:",a),!i)return;if(function(){const t=window.location.hostname.toLowerCase();return n.some(n=>t===n||t.endsWith("."+n))}())return console.log("Site should be completely blocked"),void(document.documentElement.innerHTML=`\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <title>Site Blocked - Focus Mode</title>\n      <style>\n        body {\n          font-family: Arial, sans-serif;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          min-height: 100vh;\n          margin: 0;\n          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n          color: white;\n        }\n        .container {\n          text-align: center;\n          padding: 40px;\n          background: rgba(255, 255, 255, 0.1);\n          border-radius: 15px;\n          backdrop-filter: blur(10px);\n          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\n          max-width: 500px;\n        }\n        h1 {\n          font-size: 2.5em;\n          margin-bottom: 20px;\n          color: #fff;\n        }\n        .icon {\n          font-size: 4em;\n          margin-bottom: 20px;\n        }\n        p {\n          font-size: 1.2em;\n          line-height: 1.6;\n          margin-bottom: 30px;\n          opacity: 0.9;\n        }\n        .site-name {\n          font-weight: bold;\n          color: #ffeb3b;\n        }\n        .motivational {\n          font-style: italic;\n          margin-top: 20px;\n          padding: 20px;\n          background: rgba(255, 255, 255, 0.1);\n          border-radius: 10px;\n          border-left: 4px solid #ffeb3b;\n        }\n        button {\n          background: #ff6b6b;\n          color: white;\n          border: none;\n          padding: 12px 30px;\n          font-size: 1.1em;\n          border-radius: 25px;\n          cursor: pointer;\n          transition: all 0.3s ease;\n          margin: 10px;\n        }\n        button:hover {\n          background: #ff5252;\n          transform: translateY(-2px);\n          box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);\n        }\n        .turn-off-btn {\n          background: #4caf50;\n        }\n        .turn-off-btn:hover {\n          background: #45a049;\n        }\n      </style>\n    </head>\n    <body>\n      <div class="container">\n        <div class="icon">ðŸš«</div>\n        <h1>Site Completely Blocked</h1>\n        <p>\n          <span class="site-name">${window.location.hostname}</span> is completely blocked while Focus Mode is on.\n        </p>\n        <p>This site is known to be highly distracting and doesn't support content evaluation.</p>\n        \n        <div class="motivational">\n          "The successful warrior is the average person with laser-like focus." - Bruce Lee\n        </div>\n        \n        <div style="margin-top: 30px;">\n          <button onclick="history.back()" class="turn-off-btn">Go Back</button>\n          <button onclick="window.close()">Close Tab</button>\n        </div>\n      </div>\n    </body>\n    </html>\n  `);(function(){const n=window.location.hostname.toLowerCase();return t.some(t=>n===t||n.endsWith("."+t))})()&&o()?(console.log("Site should have content evaluated and we're on specific content"),setTimeout(async()=>{const n=function(){const n=window.location.hostname.toLowerCase();let t="";if(n.includes("youtube.com")){if(!o())return"";const n=["h1.ytd-video-primary-info-renderer","h1.title.style-scope.ytd-video-primary-info-renderer",'h1[class*="title"]',".title.style-scope.ytd-video-primary-info-renderer","h1.style-scope.ytd-video-primary-info-renderer","yt-formatted-string.style-scope.ytd-video-primary-info-renderer","#container h1",".ytd-video-primary-info-renderer h1","h1.ytd-watch-metadata","yt-formatted-string#title",".ytd-watch-metadata h1"];for(const o of n){const n=document.querySelector(o);if(n&&n.textContent.trim()){t=n.textContent.trim();break}}if(!t||t.length<5){const n=document.querySelector("#description-text, .ytd-video-secondary-info-renderer");if(n){const o=n.textContent.trim().substring(0,100);o&&(t=`${t||"Video"}: ${o}`)}}}else if(n.includes("twitter.com")||n.includes("x.com")){if(!o())return"";const n=document.querySelector('[data-testid="tweetText"]');n&&(t=n.textContent.trim())}return console.log("Extracted content:",t),t}();if(console.log("Extracted content:",n),n&&n.length>5&&a.length>0)try{const t=await window.chrome.runtime.sendMessage({action:"evaluateContent",content:n,focusAreas:a});console.log("Evaluation response:",t),t&&!t.isRelevant?(console.log("Content is not relevant, showing overlay"),function(n,t){const o=document.getElementById("focus-mode-overlay");o&&o.remove(),function(){if(window.location.hostname.toLowerCase().includes("youtube.com")){const n=document.querySelector("video");if(n&&!n.paused)return n.pause(),console.log("Video paused using video element"),!0;if(window.ytplayer&&window.ytplayer.pauseVideo)return window.ytplayer.pauseVideo(),console.log("Video paused using YouTube player API"),!0;const t=document.querySelector(".ytp-play-button[aria-label*='Pause']");if(t)return t.click(),console.log("Video paused by clicking pause button"),!0;const o=document.querySelector("#movie_player, .html5-video-player");if(o){const n=new KeyboardEvent("keydown",{key:" ",code:"Space",keyCode:32,which:32,bubbles:!0});return o.dispatchEvent(n),console.log("Attempted to pause video with spacebar"),!0}}return!1}()&&console.log("Video paused before showing overlay");const e=function(n){return n&&0!==n.length?n.map(n=>`<span class="focus-tag">${n}</span>`).join(""):"None set"}(t),i=document.createElement("div");i.id="focus-mode-overlay",i.innerHTML=`\n    <div class="focus-overlay-container">\n      <div class="focus-overlay-content">\n        <div class="focus-icon">ðŸŽ¯</div>\n        <h1>Content Not Aligned with Your Focus</h1>\n        <div class="content-info">\n          <p><strong>Your Focus Areas:</strong></p>\n          <div class="focus-areas-display">${e}</div>\n          <p><strong>Current Content:</strong> "${n}"</p>\n        </div>\n        <div class="motivational-quote">\n          <p>"Success is the result of preparation, hard work, and learning from failure." - Colin Powell</p>\n        </div>\n        <div class="overlay-buttons">\n          <button id="goBackBtn" class="overlay-btn back-btn">Take Me Back</button>\n          <button id="continueBtn" class="overlay-btn continue-btn" disabled>\n            Continue Anyway (<span id="countdown">120</span>s)\n          </button>\n        </div>\n        <div class="justification-section" id="justificationSection" style="display: none;">\n          <h3>Why do you need to view this content?</h3>\n          <textarea id="justificationText" placeholder="Explain why this content is necessary for your current focus..."></textarea>\n          <button id="submitJustification" class="overlay-btn justify-btn">Submit & Continue</button>\n        </div>\n      </div>\n    </div>\n  `;const a=document.createElement("style");a.textContent="\n    #focus-mode-overlay {\n      position: fixed !important;\n      top: 0 !important;\n      left: 0 !important;\n      width: 100% !important;\n      height: 100% !important;\n      background: rgba(0, 0, 0, 0.95) !important;\n      z-index: 2147483647 !important;\n      display: flex !important;\n      justify-content: center !important;\n      align-items: center !important;\n      font-family: Arial, sans-serif !important;\n    }\n    \n    .focus-overlay-container {\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;\n      border-radius: 20px !important;\n      padding: 40px !important;\n      max-width: 600px !important;\n      text-align: center !important;\n      color: white !important;\n      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3) !important;\n    }\n    \n    .focus-icon {\n      font-size: 4em !important;\n      margin-bottom: 20px !important;\n    }\n    \n    .focus-overlay-content h1 {\n      font-size: 2.2em !important;\n      margin-bottom: 30px !important;\n      color: #fff !important;\n    }\n    \n    .content-info {\n      background: rgba(255, 255, 255, 0.1) !important;\n      padding: 20px !important;\n      border-radius: 10px !important;\n      margin-bottom: 30px !important;\n      text-align: left !important;\n    }\n    \n    .content-info p {\n      margin: 10px 0 !important;\n      font-size: 1.1em !important;\n    }\n    \n    .focus-areas-display {\n      margin: 10px 0 !important;\n      display: flex !important;\n      flex-wrap: wrap !important;\n      gap: 8px !important;\n    }\n    \n    .focus-tag {\n      display: inline-block !important;\n      background-color: rgba(255, 255, 255, 0.2) !important;\n      color: #fff !important;\n      padding: 4px 12px !important;\n      border-radius: 15px !important;\n      font-size: 0.9em !important;\n      border: 1px solid rgba(255, 255, 255, 0.3) !important;\n    }\n    \n    .motivational-quote {\n      font-style: italic !important;\n      margin: 30px 0 !important;\n      padding: 20px !important;\n      background: rgba(255, 255, 255, 0.1) !important;\n      border-radius: 10px !important;\n      border-left: 4px solid #ffeb3b !important;\n    }\n    \n    .overlay-buttons {\n      display: flex !important;\n      gap: 20px !important;\n      justify-content: center !important;\n      margin-top: 30px !important;\n    }\n    \n    .overlay-btn {\n      padding: 15px 30px !important;\n      border: none !important;\n      border-radius: 25px !important;\n      font-size: 1.1em !important;\n      cursor: pointer !important;\n      transition: all 0.3s ease !important;\n      font-weight: bold !important;\n    }\n    \n    .back-btn {\n      background: #4caf50 !important;\n      color: white !important;\n    }\n    \n    .back-btn:hover {\n      background: #45a049 !important;\n      transform: translateY(-2px) !important;\n    }\n    \n    .continue-btn {\n      background: #ff6b6b !important;\n      color: white !important;\n    }\n    \n    .continue-btn:disabled {\n      background: #ccc !important;\n      cursor: not-allowed !important;\n    }\n    \n    .continue-btn:not(:disabled):hover {\n      background: #ff5252 !important;\n      transform: translateY(-2px) !important;\n    }\n    \n    .justification-section {\n      margin-top: 30px !important;\n      text-align: left !important;\n    }\n    \n    .justification-section h3 {\n      margin-bottom: 15px !important;\n      text-align: center !important;\n    }\n    \n    .justification-section textarea {\n      width: 100% !important;\n      height: 100px !important;\n      padding: 15px !important;\n      border: none !important;\n      border-radius: 10px !important;\n      font-size: 1em !important;\n      resize: vertical !important;\n      margin-bottom: 15px !important;\n      box-sizing: border-box !important;\n    }\n    \n    .justify-btn {\n      background: #ff9800 !important;\n      color: white !important;\n      width: 100% !important;\n    }\n    \n    .justify-btn:hover {\n      background: #f57c00 !important;\n    }\n  ",document.head.appendChild(a),document.body.appendChild(i);const r=document.getElementById("goBackBtn"),s=document.getElementById("continueBtn"),c=document.getElementById("justificationSection"),d=document.getElementById("submitJustification"),l=document.getElementById("countdown");r.addEventListener("click",()=>{window.history.back()});let m=120;const p=setInterval(()=>{m--,l.textContent=m,m<=0&&(clearInterval(p),s.disabled=!1,s.innerHTML="Continue Anyway")},1e3);s.addEventListener("click",()=>{s.disabled||(c.style.display="block",s.style.display="none")}),d.addEventListener("click",()=>{const n=document.getElementById("justificationText").value.trim();n.length<20?alert("Please provide a more detailed justification (at least 20 characters)"):(console.log("User justification:",n),i.remove())})}(n,a)):console.log("Content is relevant, allowing access")}catch(n){console.error("Error sending message to background:",n)}else console.log("No meaningful content found or no focus areas set")},3e3)):console.log("Not evaluating content - either not a monitored site or not on specific content")}catch(n){console.error("Error handling focus mode:",n)}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e();let i=location.href;new MutationObserver(()=>{const n=location.href;n!==i&&(i=n,console.log("URL changed to:",n),setTimeout(e,2e3))}).observe(document,{subtree:!0,childList:!0}),window.chrome.storage.onChanged.addListener((n,t)=>{"local"===t&&(n.focusMode||n.focusAreas)&&(console.log("Storage changed, re-evaluating"),e())})})();
//# sourceMappingURL=content.bundle.js.map